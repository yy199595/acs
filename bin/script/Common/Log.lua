---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by leyi.
--- DateTime: 2023/5/8 19:48
---

local Log = { }
local lfmt = require("util.fmt")
local string_format = lfmt.format
local console = require("Console")
local logger = require("core.log")
local debug_traceback = debug.traceback

function Log.Info(fmt, ...)
    local message = string_format(fmt, ...)
    logger.Output(console.LogInfo, message)
end

function Log.OnError(error_msg)

    local pos = string.find(error_msg, "/[^/]*$")
    if pos then
        error_msg = string.sub(error_msg, pos + 1)
    end
    local message = debug_traceback(error_msg, 2)
    logger.Output(console.LogError, message)
end

function Log.Debug(fmt, ...)
    local message = string_format(fmt, ...)
    logger.Output(console.LogDebug, message)
end

function Log.Stack(err)
    local stack = debug_traceback(err, 5)
    logger.Output(console.LogError, stack)
end

function Log.Warning(fmt, ...)
    local message = string_format(fmt, ...)
    logger.Output(console.LogWarn, message)
end

function Log.Error(fmt, ...)
    local message = string_format(fmt, ...)
    logger.Output(console.LogError, message)
end

function Log.Fatal(fmt, ...)
    local msg = string_format(fmt, ...)
    local message = debug_traceback() .. msg
    logger.Output(console.LogFatal, message)
end

return Log